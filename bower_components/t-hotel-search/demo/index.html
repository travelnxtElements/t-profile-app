<!doctype html>
<html>

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width, minimum-scale=1.0, initial-scale=1, user-scalable=yes">
    <title>t-hotel-search demo</title>
    <script src="../../webcomponentsjs/webcomponents-lite.js"></script>
    <link rel="import" href="../t-hotel-search-page.html">
    <link rel="import" href="../../t-shared-components/theme.html">
    <link rel="import" href="../../t-mystique-auth/t-mystique-auth.html">    
    <style>
    html,
    body {
        font-family: 'Open sans';
        margin: 5px;
    }
    </style>
</head>

<body>
    <template is="dom-bind" id="domBindTemplate">
        <t-mystique-auth
            name="mystique"
            url="http://qa-mystiquecode.tavisca.com/api/authentication/authenticate/context"
            token-response="{{tokenResponse}}"
            auto>
        </t-mystique-auth>

        <t-hotel-search-page
            id="searchPage"
            api-base-url="http://qa-mystiquecode.tavisca.com/"
            auth-token="{{tokenResponse.authenticationToken}}"
            api-url-format="/api/Session/SESSIONKEY">
        </t-hotel-search-page>
</body>
<script type="text/javascript">
window.addEventListener('WebComponentsReady', function(e) {
    var template = document.getElementById('domBindTemplate');
    template.$.searchPage.addEventListener('t-hotel-search-success', function() {
        console.log('search successful do post handling..');
    });    
});
</script>
</html>
