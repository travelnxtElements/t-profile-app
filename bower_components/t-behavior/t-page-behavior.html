/**
 * A comment describing this behavior...
 * @polymerBehavior PageBehavior
 */

<script>

    (function(window, undefined) {

        'use strict'

        window.TravelNxt = window.TravelNxt || {};
        window.TravelNxt.Behaviors = window.TravelNxt.Behaviors || {};
        window.TravelNxt.Behaviors.PageBehavior = {

            properties: {

                /*
                 * This is a notification flag to indicate current page state
                 * Set it to true if page needs to be displayed on browser
                 */
                visible: {
                    type: Boolean,
                    value: false,
                    notify: true,
                    reflectToAttribute: true
                },
                /*
                 * This flag is et to true whenever server side call is made
                 * Bind it with `loading` property of `provider behavior`
                 */
                loading: {
                    type: Boolean,
                    notify: true
                },

                /*
                 * This string is query string containing token value
                 */
                authToken: {
                    type: String
                },

                /*
                 * This property holds the value of api base URL
                 */
                apiBaseUrl: {
                    type: String
                },

                /*
                 * This property holds the value of web api URL format
                 */
                apiUrlFormat: {
                    type: String
                },

                /**
                 * This property holds value of currency.
                 */
                currency: {
                    type: String,
                    value: 'USD'
                },

                /*
                 * This property holds value of search id generated after search call
                */
                searchId: {
                    type: String,
                    notify: true
                },

                /*
                 * This property holds the value of search criteria
                 */
                searchCriteria: {
                    type: Object,
                    notify: true
                },

                /*
                 * This property holds the value of selected itinerary
                 */
                itinerary: {
                    type: Object,
                    notify: true
                },

                /*
                 * This property holds the value of selected itinerary id
                 */
                itineraryId: {
                    type: String
                },

                /*
                 * This property holds the value of passenger info
                 */
                passengerInfo: {
                    type: Object
                },

                /*
                 * This property holds the value of booked itinerary
                 */
                bookedItinerary: {
                    type: Object,
                    notify: true
                },

                /*
                 * This property holds the value of booked itinerary
                 */
                bookedResponse: {
                    type: Object,
                    notify: true
                },

                /**
                 * Property to have customizable policy header icon
                 * @type {String}
                 */
                headerBackIcon: {
                    type: String,
                    value: 'arrow-back'
                }
            },

            _isConstructorChanged : function () {

                //check if constructorObj is primitive
                if (this._isPrimitiveConstructor()) {
                    return this.constructorObj !== this._constructorObj;
                }

                if (!this.constructorObj) {
                    return false;
                }

                if (!this._constructorObj) {
                    return true;
                }

                var keys = Object.keys(this.constructorObj);

                if (!keys || !keys.length) {
                    return false;
                }

                var isChanged = false;

                for (var i = 0; i < keys.length; i++) {
                    isChanged = this._constructorObj[keys[i]] !== this.constructorObj[keys[i]] || isChanged;
                }

                return isChanged;
            },

            _isPrimitiveConstructor: function () {
                return typeof this.constructorObj === 'string' || typeof this.constructorObj === 'number' || typeof this.constructorObj === 'boolean';
            }
        };
    })(window);

</script>
